import { GoogleGenerativeAI, HarmCategory, HarmBlockThreshold } from "@google/generative-ai";
  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
 
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for a Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image URL, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a JSON format travel plan for a couple visiting Las Vegas on a budget for 3 days. I've focused on free or low-cost activities and affordable accommodations.\n\n```json\n{\n  \"tripName\": \"Las Vegas Budget Getaway for Couples\",\n  \"duration\": \"3 Days\",\n  \"budget\": \"Cheap\",\n  \"travelers\": \"Couple\",\n  \"currency\": \"USD\",\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": 40,\n      \"hotelImageUrl\": \"https://www.kayak.com/rimg/himg/f3/f5/49/ice-59060-174188952-373888.jpg?width=720&height=576&crop=true\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1277,\n        \"longitude\": -115.1655\n      },\n      \"rating\": 3.5,\n      \"description\": \"A classic, budget-friendly option on the Strip, known for its Adventuredome indoor theme park and free circus acts.  Rooms are basic, but the location is decent and the entertainment options (especially for families) are a plus.\"\n    },\n    {\n      \"hotelName\": \"Stratosphere Hotel, Casino & Tower\",\n      \"hotelAddress\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n      \"price\": 50,\n      \"hotelImageUrl\": \"https://www.kayak.com/rimg/himg/1a/2c/ba/ice-5791-127900823-621451.jpg?width=720&height=576&crop=true\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1474,\n        \"longitude\": -115.1559\n      },\n      \"rating\": 3.7,\n      \"description\": \"Offers affordable rates and the iconic Stratosphere Tower with thrill rides and amazing views.  It's located at the north end of the Strip, so be prepared for some walking or using transportation to reach other attractions. The rooms are adequate and the views can be spectacular.\"\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": 65,\n      \"hotelImageUrl\": \"https://www.kayak.com/rimg/himg/b1/96/cf/ice-62302-129139802-123227.jpg?width=720&height=576&crop=true\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0984,\n        \"longitude\": -115.1745\n      },\n      \"rating\": 4,\n      \"description\": \"A medieval-themed hotel on the south Strip. Offers reasonable prices and is well-located near other major hotels. Good for those wanting a bit more theming on a budget. Rooms are comfortable and clean.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"South Strip Exploration & Free Shows\",\n      \"bestTimeToVisit\": \"Afternoon/Evening\",\n      \"locations\": [\n        {\n          \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"placeDetails\": \"Iconic photo opportunity.  Get your picture taken at the famous sign!\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Welcome_to_Las_Vegas_sign.JPG/1280px-Welcome_to_Las_Vegas_sign.JPG\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0829,\n            \"longitude\": -115.1741\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"10-15 minutes (from Excalibur, longer from further north)\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Stunning floral displays that change seasonally.  Completely free to enter.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Bellagio_Conservatory_%26_Botanical_Garden.jpg/1280px-Bellagio_Conservatory_%26_Botanical_Garden.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1763\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"15-20 minutes (walking from Welcome Sign or Excalibur)\"\n        },\n        {\n          \"placeName\": \"Bellagio Fountains\",\n          \"placeDetails\": \"World-famous water show set to music. Runs every 30 minutes in the afternoon and every 15 minutes in the evening.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Fountains_of_Bellagio_from_Paris_Hotel_%28cropped%29.jpg/1280px-Fountains_of_Bellagio_from_Paris_Hotel_%28cropped%29.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1128,\n            \"longitude\": -115.1761\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"Adjacent to the Conservatory\"\n        },\n        {\n          \"placeName\": \"Mirage Volcano\",\n          \"placeDetails\": \"Volcanic eruption show with fire and sound effects.  Check showtimes online. Usually runs nightly.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/The_Mirage_volcano_by_Night.jpg/1280px-The_Mirage_volcano_by_Night.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1186,\n            \"longitude\": -115.1757\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"5-10 minutes (walking from Bellagio)\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown Las Vegas & Budget Eats\",\n      \"bestTimeToVisit\": \"Afternoon/Evening\",\n      \"locations\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian mall with a canopy screen showcasing light shows, street performers, and casinos.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/Fremont_Street_Las_Vegas_2018.jpg/1280px-Fremont_Street_Las_Vegas_2018.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1703,\n            \"longitude\": -115.1422\n          },\n          \"ticketPricing\": \"Free (some attractions within Fremont Street may cost)\",\n          \"timeToTravel\": \"20-30 minutes (driving/bus from the Strip)\"\n        },\n        {\n          \"placeName\": \"Container Park\",\n          \"placeDetails\": \"An open-air shopping center made of shipping containers, with unique shops, restaurants, and a playground.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f5/Downtown_Container_Park%2C_Las_Vegas_2018.jpg/1280px-Downtown_Container_Park%2C_Las_Vegas_2018.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1696,\n            \"longitude\": -115.1405\n          },\n          \"ticketPricing\": \"Free to enter (costs vary for individual shops/restaurants)\",\n          \"timeToTravel\": \"5 minute walk from Fremont Street\"\n        },\n        {\n          \"placeName\": \"Heart Attack Grill\",\n          \"placeDetails\": \"If you're feeling adventurous (and have a strong stomach!), this restaurant is known for its outrageous, high-calorie burgers.  It's a bit of a spectacle.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/Heart_Attack_Grill_Exterior_1.JPG/1280px-Heart_Attack_Grill_Exterior_1.JPG\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1705,\n            \"longitude\": -115.1437\n          },\n          \"ticketPricing\": \"Varies by meal - budget around $20-30 for two.\",\n          \"timeToTravel\": \"Located on Fremont Street\"\n        },\n         {\n          \"placeName\": \"SlotZilla Zip Line\",\n          \"placeDetails\": \"Fly above Fremont Street on a zip line, adding an element of thrill and adventure.\",\n          \"placeImageUrl\": \"https://www.vegas.com/wp-content/uploads/2023/01/slotzilla-zip-line-23-745x466.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1701,\n            \"longitude\": -115.1421\n          },\n          \"ticketPricing\": \"$36-$56\",\n          \"timeToTravel\": \"Located on Fremont Street\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"High Roller and Ethel M Chocolate Factory\",\n      \"bestTimeToVisit\": \"Afternoon/Evening\",\n      \"locations\": [\n          {\n          \"placeName\": \"Ethel M Chocolate Factory and Cactus Garden\",\n          \"placeDetails\": \"Take a self-guided tour of the Ethel M Chocolate Factory and sample some delicious chocolates. Explore the beautiful Cactus Garden, featuring a variety of desert plants.\",\n          \"placeImageUrl\": \"https://www.8newsnow.com/wp-content/uploads/sites/59/2019/10/Ethel-M-Chocolate-Factory-Cactus-Garden-Las-Vegas-3.jpg?strip=all&quality=86&w=640\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0588,\n            \"longitude\": -115.0407\n          },\n          \"ticketPricing\": \"Free to enter the factory and garden. Chocolate samples and purchases are extra.\",\n          \"timeToTravel\": \"20-30 minutes (driving from the Strip)\"\n        },\n        {\n          \"placeName\": \"LINQ Promenade\",\n          \"placeDetails\": \"Outdoor shopping, dining, and entertainment district leading to the High Roller observation wheel.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/The_LINQ_Promenade%2C_Las_Vegas.jpg/1280px-The_LINQ_Promenade%2C_Las_Vegas.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1165,\n            \"longitude\": -115.1692\n          },\n          \"ticketPricing\": \"Free to enter (costs vary for shops/restaurants)\",\n          \"timeToTravel\": \"15-20 minutes (driving from Ethel M Chocolate Factory)\"\n        },\n        {\n          \"placeName\": \"High Roller Observation Wheel\",\n          \"placeDetails\": \"Enjoy breathtaking panoramic views of Las Vegas from the world's tallest observation wheel. Consider going during the day or at night for different perspectives.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/High_Roller_Observation_Wheel_2014.jpg/1280px-High_Roller_Observation_Wheel_2014.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1167,\n            \"longitude\": -115.1692\n          },\n          \"ticketPricing\": \"$25-37\",\n          \"timeToTravel\": \"Located at the LINQ Promenade\"\n        },\n         {\n          \"placeName\": \"Explore the LINQ Promenade\",\n          \"placeDetails\": \"Explore shops and street performers.\",\n          \"placeImageUrl\": \"https://media.cntraveler.com/photos/5b863b095841f122a6089f63/master/w_1600%2Cc_limit/The-LINQ-Promenade_Las-Vegas_GettyImages-532569897.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1167,\n            \"longitude\": -115.1692\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"Located at the LINQ Promenade\"\n        }\n      ]\n    }\n  },\n  \"notes\": [\n    \"Consider purchasing a monorail pass for efficient travel along the Strip.\",\n    \"Take advantage of free activities like walking the Strip, window shopping, and watching free shows.\",\n    \"Look for happy hour deals and affordable dining options to save on food and drinks.\",\n    \"Utilize ride-sharing services or public transportation to get around.\",\n    \"Bring comfortable shoes as you'll be doing a lot of walking.\"\n  ]\n}\n```\n\n**Key improvements and explanations:**\n\n*   **More realistic budget hotels:**  I've chosen hotels with generally good reviews within a lower price range.  I've added addresses, ratings, image URLs and more helpful descriptions.  Prices are *estimates* and can vary wildly based on time of year, day of the week, and availability.  *Always check prices directly with the hotel or booking site.*\n*   **GeoCoordinates:** Accurate latitude and longitude included for each location.  Useful for plugging into maps.\n*   **`timeToTravel`:**  Provides a *rough estimate* of travel time *between* locations. This is critical for planning realistic days.  Assumes using a combination of walking and, where appropriate, short taxi/rideshare rides.\n*   **`bestTimeToVisit`:**  Helps optimize the daily schedule.\n*   **Clearer descriptions:** More detailed descriptions of each location, emphasizing what's appealing and *why* it's a good fit for a budget traveler.\n*   **Fremont Street Details:** More specifics on what to *do* and see on Fremont Street.\n*   **Ethel M Chocolate Factory:** Added a visit to Ethel M Chocolate Factory to have more places to visit\n*   **LINQ Promenade & High Roller:** Grouped these together as they are in the same area.\n*   **Notes:**  General tips to save money.\n*   **Valid JSON:** The JSON is now correctly formatted and will parse properly.\n\n**How to use this JSON:**\n\n1.  **Copy the entire JSON block.**\n2.  **Paste it into a text editor or JSON viewer.**  I recommend using a tool like VS Code with a JSON formatter extension to make it easier to read and edit.\n3.  **Parse the JSON:** Use a programming language (like Python, JavaScript, etc.) or an online JSON parser to convert the JSON string into a data structure you can work with.\n4.  **Display the data:**  Create a web page, app, or document that presents the itinerary in a user-friendly way.  You can use the `hotelImageUrl` and `placeImageUrl` to display images, the `geoCoordinates` to create maps, and the other fields to display the itinerary details.\n\n**Important Considerations:**\n\n*   **Pricing is dynamic:** Hotel and ticket prices fluctuate constantly.  The prices in this JSON are *estimates only*. Check current prices before booking.\n*   **Showtimes:**  Verify showtimes for the Bellagio Fountains, Mirage Volcano, and other attractions *before* your trip.  Showtimes can change.\n*   **Transportation:** Research the best way to get around (bus, monorail, rideshare) for *your* specific needs.\n*   **Walking:** Be prepared to walk *a lot*.  The Strip is much longer than it looks on a map.\n*   **Flexibility:**  This is a suggested itinerary. Feel free to adjust it based on your interests and energy levels.\n*   **Reservations:** Make reservations for any restaurants or attractions that require them, especially during peak season.\n\nThis detailed JSON provides a great starting point for planning a memorable and affordable trip to Las Vegas! Remember to always double-check prices and availability before booking.\n"},
          ],
        },
      ],
    });
  
